<include file="public@head"/>   
<style>
#city3 .city3{
	style:none;
}
#city3 .show{
	style:block;
}
</style> 
</head>
<body>
<include file="public@header"/> 
 
<include file="public@nav"/> 
<include file="public@banner"/> 
<div class="w12">
    <div class="pro-title">
        <ul class="pro-tit-list">
            <li class="pro-tit-cur">1.基本信息</li>
            <li>2.选择类型</li>
            <li>3.账号信息</li>
            <li>4.付款方式</li>
            <li>5.支付反馈</li>
            <div class="clear"></div>
        </ul>
    </div>
    <form action="{:url('portal/index/order_do3')}" method="post" id="form_order">
        <div class="pro-box1 pro-box" id="ass">
            <div class="pro-box1-l">
                <div class="pro-input">
                    <span><span>*&nbsp;&nbsp;&nbsp;</span>所在地区</span>
                    <select id="city1" class="gy_ss_1">
                        <option value="0">选择省</option>
                        
                    </select>
                    <select id="city2" class="gy_ss_2">
                        <option value="0">选择市</option>
                       
                    </select>
                    <select id="city3" class="gy_ss_3" name="city">
                        <option value="0">选择区</option>
                        
                    </select>
                </div>
                <div class="pro-input">
                    <span><span>*&nbsp;&nbsp;&nbsp;</span><label for="name_sy">申请人姓名</label></span>
                    <input v-model="name" id="name_sy" class="gy_ss_y" type="text" name="uname" placeholder="">
                </div>
                <div class="pro-input">
                    <span><span>*&nbsp;&nbsp;&nbsp;</span><label for="phone_sy">联系手机</label></span>
                    <input v-model="phone" id="phone_sy" class="gy_ss_gg" type="text" name="tel" placeholder="">
                </div>
                <div class="pro-input">
                    <span><span>*&nbsp;&nbsp;&nbsp;</span><label for="QQ_sssy">QQ号码</label></span>
                    <input v-model="qq" id="QQ_sssy" class="gy_t_i" type="text" name="qq" placeholder="">
                </div>
                <div class="pro-input">
                    <span><span>*&nbsp;&nbsp;&nbsp;</span><label for="email_sssy">常用邮箱</label></span>
                    <input v-model="email" id="email_sssy" class="gy_suyty" type="text" name="email" placeholder="">
                </div>
                <div class="pro-text1">
                    <p>请正确填写信息，避免无法正常接收服务信息</p>
                    <p>
                        <input id="gsy1" class="gy_sio" type="checkbox"><label for="gsy1">我已阅读并同意和遵守</label><a href="{:url('portal/about/protocol')}" style="color:#f00;">《本站服务协议》</a>
                    </p>
                   
                </div>
            </div>
            <div class="pro-box-r">
<!--                <img src="__TMPL__/public/assets/img/pro-1.jpg">-->
				<div class="shaungxsj_ss">
					<div class="div1_ss"></div>
					<div class="txtsy_ss">
						<p><span>姓名</span>		 <span id="span_text1"></span></p>
						<p><span>手机号</span>	    <span id="span_text2"></span></p>
						<p><span>QQ号</span>		 <span id="span_text3"></span></p>
						<p><span>邮箱</span>	    <span id="span_text4"></span></p>
					</div>
				</div>
            </div>
            <div class="clear"></div>
        </div>
		 <a href="javascript:void(0)" class="pro-next" id="pro-first">下一步</a>
        <div class="pro-box2 pro-box">
            <div class="pro-box2-l">
                <p>请按照公众号类型选择服务，成功后不可更改</p>
                <div class="pro-box2-l-t1 bugyalu">
	                <foreach name="cates" item="vo" k="key">
	                 	<input type="radio" name="gy_s" id="ch{$key}" value="{$vo.id}" <eq name="key" value="0">checked</eq>>
	                 	<label for="ch{$key}" class="pro-mr1">{$vo.name}</label>
	                </foreach>
                  
                </div>
                
				<div style="border-top:1px solid gray">
 					<foreach name="services" item="vo" k="key">
						<div class="show_ss_1" style="display:<eq name='key' value='0'>block<else/>none</eq>">
							<foreach name="vo" item="vv" > 
								<div class="pro-box2-l-t1 gy">
									<input type="radio" name="gy_w" id="chv{$vv.id}" value="{$vv.id}" >
									<label for="chv{$vv.id}">{$vv.name} </label>
									<span class="money1">¥{$vv.price}</span>
									<p>{$vv.dsc}</p>
								</div>
							</foreach> 
						</div>
					</foreach>
	 	 		</div>
	                <div class="">
	                    <a href="javascript:void(0)" class="pro-prev" id="pro-second1">上一步</a>
	                    <a href="javascript:void(0)" class="pro-next" id="pro-second2">下一步</a>
                </div>
            </div>
            <div class="pro-box2-r">
				<p>个人类型：需要提供注册人身份证</p>
				<p>企业类型：需提供营业执照（非个体商户）企业对公司银行账户信息和注册人身份证</p>
				<p>服务好介绍：每个月只能给粉丝群发4次消息（1-8篇）</p>
				<p>订阅号介绍：每天都可以给粉丝群发送一次消息（1-8篇）</p>
				<img src="__TMPL__/public/assets/img/pro-1.jpg"></div>
            <div class="clear"></div>
        </div>
        <div class="pro-box3 pro-box">
             <div class="huluwa" id="app">
				<div class="aoteman_left">
					<div class="divs_1">
						<span class="guyuan"><label for="text_sssgy">账号名称</label></span>
						<input id="text_sssgy" class="guyuan_syj1" type="text" name="wx_name" v-model="text" placeholder="请输入账号名称" minlength="2" maxlength="16">
					</div>
					<div class="divs_2">
						<span><label for="textarea_sssshu">功能介绍</label></span>
						<textarea id="textarea_sssshu" class="guyuan_syj2"  v-model="gy" name="wx_dsc" placeholder="4~120个字，介绍此公众号功能与特色" minlength="4" maxlength="120" cols="30" rows="10"></textarea>
					</div>
					<div class="divs_3">
						<span>功能描述</span>
						<p>  
							文章推送(文字、语音、视频、图文)、粉丝管理、群发功能、微信自动回复、客服功能、自定义导航菜单。微网站、微表单、微投票、抽奖、	刮刮奖、会员卡、优惠券等营销功能。
						</p>
					</div>
				</div>
				<div class="dongfangsw_right">
					<div><img src="__TMPL__/public/assets/img/section129f4d4.png" width="100%" alt=""></div>
					<p id="gggysr1" class="p1"></p> 
					<div>
						<div style="vertical-align: top" class="parent1"><img src="__TMPL__/public/assets/img/sectionwewew.png" height="35px" alt=""></div>
						<div id="gggysr2" class="parent"></div>
					</div>
					<div><img src="__TMPL__/public/assets/img/section229f4d4.png" width="100%" alt=""></div>
				</div>
	        </div>
			<div class="divs_4">
				<a href="javascript:void(0);" id="pro-third1">上一步</a>
				<a href="javascript:void(0);" id="form_submit">确认订单</a>
			</div>
	        <input type="hidden" id="oid" name="oid" value=""/>
	   	 </div>
	</form>
	
</div>
 
<include file="public@footer"/>
 <script src="__TMPL__/public/assets/js/city.js"></script>
<script>
//	var vm=new Vue({
//		el:"#app",
//		data:{
//			text:"",
//			gy:"",
//		}
//	});
//	var vms=new Vue({
//		el:"#ass",
//		data:{
//			name:"",
//			phone:"",
//			qq:"",
//			email:"",
//		}
//	});
	
	var name_s1=document.getElementById("name_sy");
  	var span_s1=document.getElementById("span_text1");
	var name_s2=document.getElementById("phone_sy");
  	var span_s2=document.getElementById("span_text2");
	var name_s3=document.getElementById("QQ_sssy");
  	var span_s3=document.getElementById("span_text3");
	var name_s4=document.getElementById("email_sssy");
  	var span_s4=document.getElementById("span_text4");
	var name_s5=document.getElementById("text_sssgy");
  	var span_s5=document.getElementById("gggysr1");
	var name_s6=document.getElementById("textarea_sssshu");
  	var span_s6=document.getElementById("gggysr2");
//	console.log(span_s1.innerHTML);
	function data_text(input_s,p_sg){
		if(document.all){
			input_s.onpropertychange=function(){
				p_sg.innerHTML=input_s.value;
				console.log(2323);
			}
		}
	   	else{
			input_s.oninput=function(){
				p_sg.innerHTML=input_s.value;
				console.log(565656);
			}
	  }
	}
	data_text(name_s1,span_s1);
	data_text(name_s2,span_s2);
	data_text(name_s3,span_s3);
	data_text(name_s4,span_s4);
	data_text(name_s5,span_s5);
	data_text(name_s6,span_s6);
</script>
<script>
 
 
 var citys1='';
 var citys2='';
 var citys3='';
 var v;
for(v in city1){ 
	citys1+='<option value="'+v+'">'+city1[v]+'</option>';
 }  
 
$('#city1').append(citys1);
$('#oid').val('');
$('#city1').change(function(){
	var fid=this.value;
	$('#city2').val(0);
	$('#city3').val(0);
	$('#city2 .city').remove();
	$('#city3 .city').remove();
	citys2='';
	for(v in city2[fid]){ 
		citys2+='<option class="city" value="'+v+'">'+city2[fid][v]+'</option>';
	 }
	$('#city2').append(citys2);
});
 
$('#city2').change(function(){ 
	var fid=this.value; 
	$('#city3').val(0); 
	$('#city3 .city').remove();
	citys3='';
	for(v in city3[fid]){ 
		citys3+='<option class="city" value="'+v+'">'+city3[fid][v]+'</option>';
	 }
	$('#city3').append(citys3);
	$('#city3').append(citys3);
});
 
function order_do1(){ 
	ajax_result=0;
     var oid=$('#oid').val();
	 $.ajax({
         type: 'POST',
         url: "{:url('portal/index/order_do1')}",
         dataType: 'json',
         async:false,
         data:{'city':quji,'uname':xingming,'tel':shouji,'qq':qqhao,'email':youxiang,'oid':oid},
         success: function(data){  
         	if(data.code==1){ 
         		 
         		$('#oid').val(data.data.oid);
         		ajax_result=1;
         	}else{   
         		alert(data.msg);  
         	} 
         },
         error: function (event, XMLHttpRequest, ajaxOptions, thrownError) {
        	 
        	 alert('服务器连接错误'); 
         }
     });
} 
function order_do2(){ 
	ajax_result=0;
    var oid=$('#oid').val(); 
	 $.ajax({
         type: 'POST',
         url: "{:url('portal/index/order_do2')}",
         dataType: 'json',
         async:false,
         data:{'oid':oid,'service_id':sid},
         success: function(data){  
         	if(data.code==1){ 
         		ajax_result=1;
         	}else{   
         		alert(data.msg);  
         	} 
         },
         error: function (event, XMLHttpRequest, ajaxOptions, thrownError) {
        	  
        	 alert('服务器连接错误'); 
         }
     });
} 
	var mingcheng;
$("#pro-third1").click(function(){
//	$("#pro-first").show();
	$(".pro-box2").show();
    $(".pro-box3").hide();
    $(".pro-tit-list li").removeClass("pro-tit-cur");
    $(".pro-tit-list li:nth-child(2)").addClass("pro-tit-cur");
});
 $('#form_submit').click(function(){
	var hgy=false;
	var hyg=false;
	var re5=new RegExp("\\s+");
	mingcheng=$(".guyuan_syj1").val();
	var neirong=$(".guyuan_syj2").val();
	var r=re5.test(mingcheng);
	var t=re5.test(neirong);
//	console.log(r,t);
	if(r){alert("公众号名称不能含有空格！");return}else{hgy=true}
	if(mingcheng==""){hgy=false;alert("公众号名称必须填写！");return}
	if(t){alert("产品介绍不能含有空格！");return}else{hyg=true}
	if(neirong==""){hyg=false;alert("产品介绍必须填写!");return}
	if(hgy&&hyg){
	 $('#form_order').submit();
	}
 });
</script>