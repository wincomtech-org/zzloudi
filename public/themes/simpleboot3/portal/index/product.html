<include file="public@head"/>   
<style>
#city3 .city3{
	style:none;
}
#city3 .show{
	style:block;
}
</style> 
</head>
<body>
<include file="public@header"/> 
 
<include file="public@nav"/> 
<include file="public@banner"/> 
<div class="w12">
    <div class="pro-title">
        <ul class="pro-tit-list">
            <li class="pro-tit-cur">1.基本信息</li>
            <li>2.选择类型</li>
            <li>3.账号信息</li>
            <li>4.付款方式</li>
            <li>5.支付反馈</li>
            <div class="clear"></div>
        </ul>
    </div>
    <form action="{:url('portal/index/order_do3')}" method="post" id="form_order">
        <div class="pro-box1 pro-box" id="ass">
            <div class="pro-box1-l">
                <div class="pro-input">
                    <span>所在地区</span>
                    <select id="city1" class="gy_ss_1">
                        <option value="0">选择省</option>
                        
                    </select>
                    <select id="city2" class="gy_ss_2">
                        <option value="0">选择市</option>
                       
                    </select>
                    <select id="city3" class="gy_ss_3" name="city">
                        <option value="0">选择区</option>
                        
                    </select>
                </div>
                <div class="pro-input">
                    <span>申请人姓名</span>
                    <input v-model="name" class="gy_ss_y" type="text" name="uname" placeholder="">
                </div>
                <div class="pro-input">
                    <span>联系手机</span>
                    <input v-model="phone" class="gy_ss_gg" type="text" name="tel" placeholder="">
                </div>
                <div class="pro-input">
                    <span>QQ号码</span>
                    <input v-model="qq" class="gy_t_i" type="text" name="qq" placeholder="">
                </div>
                <div class="pro-input">
                    <span>常用邮箱</span>
                    <input v-model="email" class="gy_suyty" type="text" name="email" placeholder="">
                </div>
                <div class="pro-text1">
                    <p>请正确填写信息，避免无法正常接收服务信息</p>
                    <p>
                        <input class="gy_sio" type="checkbox">我已阅读并同意和遵守<a href="{:url('portal/about/protocol')}" style="color:#f00;">《本站服务协议》</a>
                    </p>
                   
                </div>
            </div>
            <div class="pro-box-r">
<!--                <img src="__TMPL__/public/assets/img/pro-1.jpg">-->
				<div class="shaungxsj_ss">
					<div class="div1_ss"></div>
					<div class="txtsy_ss">
						<p><span>姓名</span>{{name}}</p>
						<p><span>手机号</span>{{phone}}</p>
						<p><span>QQ号</span>{{qq}}</p>
						<p><span>邮箱</span>{{email}}</p>
					</div>
				</div>
            </div>
            <div class="clear"></div>
        </div>
		 <a href="javascript:void(0)" class="pro-next" id="pro-first">下一步</a>
        <div class="pro-box2 pro-box">
            <div class="pro-box2-l">
                <p>请按照公众号类型选择服务，成功后不可更改</p>
                <div class="pro-box2-l-t1 bugyalu">
	                <foreach name="cates" item="vo" k="key">
	                 	<input type="radio" name="gy_s" id="ch{$key}" value="{$vo.id}" <eq name="key" value="0">checked</eq>>
	                 	<label for="ch{$key}" class="pro-mr1">{$vo.name}</label>
	                </foreach>
                  
                </div>
                
				<div style="border-top:1px solid gray">
 					<foreach name="services" item="vo" k="key">
						<div class="show_ss_1" style="display:<eq name='key' value='0'>block<else/>none</eq>">
							<foreach name="vo" item="vv" > 
								<div class="pro-box2-l-t1 gy">
									<input type="radio" name="gy_w" id="chv{$vv.id}" value="{$vv.id}" >
									<label for="chv{$vv.id}">{$vv.name} </label>
									<span class="money1">¥{$vv.price}</span>
									<p>{$vv.dsc}</p>
								</div>
							</foreach> 
						</div>
					</foreach>
	 	 		</div>
	                <div class="">
	                    <a href="javascript:void(0)" class="pro-prev" id="pro-second1">上一步</a>
	                    <a href="javascript:void(0)" class="pro-next" id="pro-second2">下一步</a>
                </div>
            </div>
            <div class="pro-box2-r"><img src="__TMPL__/public/assets/img/pro-1.jpg"></div>
            <div class="clear"></div>
        </div>
        <div class="pro-box3 pro-box">
             <div class="huluwa" id="app">
				<div class="aoteman_left">
					<div class="divs_1">
						<span class="guyuan">公众号名称</span>
						<input class="guyuan_syj1" type="text" name="wx_name" v-model="text" placeholder="请输入公众号名称（2-16字）" minlength="2" maxlength="16">
					</div>
					<div class="divs_2">
						<span>产品介绍</span>
						<textarea class="guyuan_syj2"  v-model="gy" name="wx_dsc" id="" placeholder="请输入产品简介（4-140字）" minlength="4" maxlength="140" cols="30" rows="10"></textarea>
					</div>
					<div class="divs_3">
						<span>功能描述</span>
						<p>  
							文章推送(文字、语音、视频、图文)、粉丝管理、群发功能、微信自动回复、客服功能、自定义导航菜单。微网站、微表单、微投票、抽奖、	刮刮奖、会员卡、优惠券等营销功能。
						</p>
					</div>
				</div>
				<div class="dongfangsw_right">
					<div><img src="__TMPL__/public/assets/img/section129f4d4.png" width="100%" alt=""></div>
					<p class="p1">{{ text }}</p> 
					<div>
						<div style="vertical-align: top" class="parent1"><img src="__TMPL__/public/assets/img/sectionwewew.png" height="35px" alt=""></div>
						<div class="parent">{{ gy }}</div>
					</div>
					<div><img src="__TMPL__/public/assets/img/section229f4d4.png" width="100%" alt=""></div>
				</div>
	        </div>
			<div class="divs_4">
				<a href="javascript:void(0);" id="pro-third1">上一步</a>
				<a href="javascript:void(0);" id="form_submit">确认订单</a>
			</div>
	        <input type="hidden" id="oid" name="oid" value=""/>
	   	 </div>
	</form>
	
</div>
 
<include file="public@footer"/>
 <script src="__TMPL__/public/assets/js/city.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
<script>
	var vm=new Vue({
		el:"#app",
		data:{
			text:"",
			gy:"",
		}
	});
	var vms=new Vue({
		el:"#ass",
		data:{
			name:"",
			phone:"",
			qq:"",
			email:"",
		}
	});
</script>
<script>
 
 
 var citys1='';
 var citys2='';
 var citys3='';
 var v;
for(v in city1){ 
	citys1+='<option value="'+v+'">'+city1[v]+'</option>';
 }  
 
$('#city1').append(citys1);
$('#oid').val('');
$('#city1').change(function(){
	var fid=this.value;
	$('#city2').val(0);
	$('#city3').val(0);
	$('#city2 .city').remove();
	$('#city3 .city').remove();
	citys2='';
	for(v in city2[fid]){ 
		citys2+='<option class="city" value="'+v+'">'+city2[fid][v]+'</option>';
	 }
	$('#city2').append(citys2);
});
 
$('#city2').change(function(){ 
	var fid=this.value; 
	$('#city3').val(0); 
	$('#city3 .city').remove();
	citys3='';
	for(v in city3[fid]){ 
		citys3+='<option class="city" value="'+v+'">'+city3[fid][v]+'</option>';
	 }
	$('#city3').append(citys3);
	$('#city3').append(citys3);
});
 
function order_do1(){ 
	ajax_result=0;
     var oid=$('#oid').val();
	 $.ajax({
         type: 'POST',
         url: "{:url('portal/index/order_do1')}",
         dataType: 'json',
         async:false,
         data:{'city':quji,'uname':xingming,'tel':shouji,'qq':qqhao,'email':youxiang,'oid':oid},
         success: function(data){  
         	if(data.code==1){ 
         		 
         		$('#oid').val(data.data.oid);
         		ajax_result=1;
         	}else{   
         		alert(data.msg);  
         	} 
         },
         error: function (event, XMLHttpRequest, ajaxOptions, thrownError) {
        	 
        	 alert('服务器连接错误'); 
         }
     });
} 
function order_do2(){ 
	ajax_result=0;
    var oid=$('#oid').val(); 
	 $.ajax({
         type: 'POST',
         url: "{:url('portal/index/order_do2')}",
         dataType: 'json',
         async:false,
         data:{'oid':oid,'service_id':sid},
         success: function(data){  
         	if(data.code==1){ 
         		ajax_result=1;
         	}else{   
         		alert(data.msg);  
         	} 
         },
         error: function (event, XMLHttpRequest, ajaxOptions, thrownError) {
        	  
        	 alert('服务器连接错误'); 
         }
     });
} 
	var mingcheng;
 $('#form_submit').click(function(){
	var hgy=false;
	var hyg=false;
	var re5=new RegExp("\\s+");
	mingcheng=$(".guyuan_syj1").val();
	var neirong=$(".guyuan_syj2").val();
	var r=re5.test(mingcheng);
	var t=re5.test(neirong);
//	console.log(r,t);
	if(r){alert("公众号名称不能含有空格！");return}else{hgy=true}
	if(mingcheng==""){hgy=false;alert("公众号名称必须填写！");return}
	if(t){alert("产品介绍不能含有空格！");return}else{hyg=true}
	if(neirong==""){hyg=false;alert("产品介绍必须填写!");return}
	if(hgy&&hyg){
	 $('#form_order').submit();
	}
 });
</script>